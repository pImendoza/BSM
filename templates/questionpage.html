<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Question</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="question.css" />
    <style>
        body {
            padding-top: 150px;
        }
        
        td {
            font-size: x-large;
        }
        
        #bruh {
            font-size: x-large;
        }
    </style>
</head>

<body class="bg-dark text-light text-center justify-content-between">

    <nav class="navbar navbar-expand-lg bg-info navbar-dark py-3 fixed-top">
        <div class="container">
            <a href="{{url_for('dashboard')}}" class="navbar-brand text-dark fw-bold">BSM</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navmenu">

            <span class="navbar-toggler-icon"></span>

        </button>
        </div>
    </nav>


    <div class="stopwatch">
        <div class="circle py-3">
            <span class="time display-4" id="display">00:00:00</span>
        </div>

        <!-- the play and pause button which are the control -->
        <div class="controls">
            <button class="buttonPlay bg-dark border-0">
          <img id="playButton" src="/static/icons/play-button.svg" />
          <img id="pauseButton" src="/static/icons/pause-button.svg" />
        </button>
            <!-- the reset square button -->
            <button class="buttonReset bg-dark border-0">
          <img id="resetButton" src="/static/icons/reset-button.svg" />
        </button>
        </div>
    </div>


    <div class="container">
        <div class="row">
            <div id=bruh class="col-3">
                {% for value in query %} {{value.difficulty}} {% endfor %}
            </div>
            <div class="col-6">
                <table>
                    {% for value in query %}
                    <tr>
                        <td class="py-2">{{value.question}}</td>
                    </tr>
                    {% endfor %}
                </table>
            </div>
            <div id=bruh class="col-3">
                {% for value in query %} {{value.catergory_id}} {% endfor %}
            </div>
        </div>
    </div>


    <form method="POST" action="">
        <div id="container">
            <div>{{ form.hidden_tag() }}</div>
            <div class="pt-4">{{ form.answer }}</div>
            <div class="py-3">{{ form.submit }}</div>
        </div>
    </form>

    <script>
        // Convert time to a format of hours, minutes, seconds, and milliseconds
        // Math.floor rounds number to lowest closest int
        function timeToString(time) {
            let diffInHrs = time / 3600000;
            let hh = Math.floor(diffInHrs);

            let diffInMin = (diffInHrs - hh) * 60;
            let mm = Math.floor(diffInMin);

            let diffInSec = (diffInMin - mm) * 60;
            let ss = Math.floor(diffInSec);

            let diffInMs = (diffInSec - ss) * 100;
            let ms = Math.floor(diffInMs);

            let formattedMM = mm.toString().padStart(2, "0");
            let formattedSS = ss.toString().padStart(2, "0");
            let formattedMS = ms.toString().padStart(2, "0");

            return `${formattedMM}:${formattedSS}:${formattedMS}`;
        }

        // Declare variables to use in our functions below

        let startTime;
        let elapsedTime = 0;
        let timerInterval;

        // Create function to modify innerHTML

        function print(txt) {
            document.getElementById("display").innerHTML = txt;
        }

        // Create "start", "pause" and "reset" functions

        function start() {
            startTime = Date.now() - elapsedTime;
            timerInterval = setInterval(function printTime() {
                elapsedTime = Date.now() - startTime;
                print(timeToString(elapsedTime));
            }, 10);
            showButton("PAUSE");
        }

        function pause() {
            clearInterval(timerInterval);
            showButton("PLAY");
        }

        function reset() {
            clearInterval(timerInterval);
            print("00:00:00");
            elapsedTime = 0;
            showButton("PLAY");
        }

        // Create function to display buttons

        function showButton(buttonKey) {
            const buttonToShow = buttonKey === "PLAY" ? playButton : pauseButton;
            const buttonToHide = buttonKey === "PLAY" ? pauseButton : playButton;
            buttonToShow.style.display = "block";
            buttonToHide.style.display = "none";
        }
        // Create event listeners

        let playButton = document.getElementById("playButton");
        let pauseButton = document.getElementById("pauseButton");
        let resetButton = document.getElementById("resetButton");

        playButton.addEventListener("load", start);
        pauseButton.addEventListener("click", pause);
        resetButton.addEventListener("click", reset);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>

</html>
